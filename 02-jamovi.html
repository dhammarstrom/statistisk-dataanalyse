<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistisk dataanalyse med Jamovi - 4&nbsp; Statistiske metoder for samvariasjon i Jamovi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-a-intro.html" rel="next">
<link href="./02-statistisk-samvariasjon.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-a-intro.html">Statistisk samvariasjon</a></li><li class="breadcrumb-item"><a href="./02-jamovi.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Statistiske metoder for samvariasjon i Jamovi</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistisk dataanalyse med Jamovi</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Forord</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./01-a-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deskriptiv dataanalyse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-deskriptiv-dataanalyse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Datah√•ndtering og Data i regnearkprogrammer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-jamovi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Deskriptiv dataanalyse i Jamovi</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./02-a-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistisk samvariasjon</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-statistisk-samvariasjon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistisk samvariasjon i dataanalyse</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-jamovi.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Statistiske metoder for samvariasjon i Jamovi</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./03-a-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Kausalsammenheng</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-kausalsammenheng.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Fra sammenheng til kausalitet</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-jamovi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Kausal analyse i Jamovi</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./04-a-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Induktiv statistikk</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-induktiv-statistikk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Statistisk inferens</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-jamovi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">04-jamovi.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./05-a-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Presentere og lese statistiske analyser</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-formidling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">En arbeidsflyt for statistisk analyse i Jamovi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-jamovi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">05-jamovi.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referanser</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Innhold</h2>
   
  <ul>
  <li><a href="#regresjon-i-jamovi" id="toc-regresjon-i-jamovi" class="nav-link active" data-scroll-target="#regresjon-i-jamovi"><span class="header-section-number">4.1</span> Regresjon i Jamovi</a>
  <ul class="collapse">
  <li><a href="#regresjon-og-korrelasjon" id="toc-regresjon-og-korrelasjon" class="nav-link" data-scroll-target="#regresjon-og-korrelasjon"><span class="header-section-number">4.1.1</span> Regresjon og korrelasjon</a></li>
  <li><a href="#multippel-regresjon-med-jamovi" id="toc-multippel-regresjon-med-jamovi" class="nav-link" data-scroll-target="#multippel-regresjon-med-jamovi"><span class="header-section-number">4.1.2</span> Multippel regresjon med Jamovi</a></li>
  </ul></li>
  <li><a href="#gruppesammenligninger-og-regresjonsanalyse" id="toc-gruppesammenligninger-og-regresjonsanalyse" class="nav-link" data-scroll-target="#gruppesammenligninger-og-regresjonsanalyse"><span class="header-section-number">4.2</span> Gruppesammenligninger og regresjonsanalyse</a>
  <ul class="collapse">
  <li><a href="#en-avhengig-t-test" id="toc-en-avhengig-t-test" class="nav-link" data-scroll-target="#en-avhengig-t-test"><span class="header-section-number">4.2.1</span> En avhengig <em>t</em>-test</a></li>
  <li><a href="#one-sample-t-test" id="toc-one-sample-t-test" class="nav-link" data-scroll-target="#one-sample-t-test"><span class="header-section-number">4.2.2</span> One-sample <em>t</em>-test</a></li>
  </ul></li>
  <li><a href="#variansanalyse-i-jamovi" id="toc-variansanalyse-i-jamovi" class="nav-link" data-scroll-target="#variansanalyse-i-jamovi"><span class="header-section-number">4.3</span> Variansanalyse i Jamovi</a></li>
  <li><a href="#krysstabulering-i-jamovi" id="toc-krysstabulering-i-jamovi" class="nav-link" data-scroll-target="#krysstabulering-i-jamovi"><span class="header-section-number">4.4</span> Krysstabulering i Jamovi</a></li>
  <li><a href="#fra-krysstabulering-til-logistisk-regresjon" id="toc-fra-krysstabulering-til-logistisk-regresjon" class="nav-link" data-scroll-target="#fra-krysstabulering-til-logistisk-regresjon"><span class="header-section-number">4.5</span> Fra krysstabulering til Logistisk regresjon</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Statistiske metoder for samvariasjon i Jamovi</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="regresjon-i-jamovi" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="regresjon-i-jamovi"><span class="header-section-number">4.1</span> Regresjon i Jamovi</h2>
<p>Vi starter med datasettet <a href="data/egg_kolesterol_1_2_3.csv"><code>egg_kolesterol_1_2_3.csv</code></a>. N√•r du laster inn datasettet i Jamovi b√∏r du kontrollere at variablene, <code>egg</code> og <code>kolesterol</code> er formatert som forventet. Bruk <em>Edit</em> under <em>Variables</em> for √• forandre <em>Measure type</em> hvis du trenger det. For √• lage en regresjonsmodell i Jamovi g√•r vi inn i modulen <em>Regression</em> og velger <em>Linear regression</em>. Her velger vi <em>dependent variable</em> (avhengig variabel). Slik vi formulerer hypotesen om forholdet mellom egg og kolesterol tror vi at antall egg p√•virker kolesterolet. Kolesterol er derfor v√•r avhengige variabel.</p>
<p>Jamovi gj√∏r et skille mellom <em>covariates</em> og <em>factors</em>. Disse er begge uavhengige variabler men covariates krever kontinuerlig data og factors h√•ndterer data som ordinal/nominal data. Vi setter inn egg som en kontinuerlig <em>covariate</em>.</p>
<p><img src="img/02-jamovi/01-egg-regress.gif" class="img-fluid">‚Äô</p>
<p>N√•r variablene er lagt inn f√•r vi to tabeller i resultatfeltet. <em>Model fit Measures</em> sier noe om styrken i sammenhengen mellom variablene. <em>R</em> tilsvarer korrelasjonskoeffisienten (se under) n√•r modellen inneholder en uavhengig variabel.</p>
<p>I tabellen <em>Model Coefficients - kolesterol</em> se vi skj√¶ringspunkt (<em>Intercept</em>) og stigningstall <em>egg</em> under <em>Predictor</em>. Under <em>Estimate</em> ser vi de estimat som modellen lager. 3.94 er gjennomsnittlig kolesterolniv√• n√•r eggkonsumpsjon er 0, for hvert egg s√• stiger kolesterolet med 0.86 enheter. For hvert estimat finner vi et standardfeil (<em>SE</em>), t-verdi (<em>t</em>) og p-verdi. Disse bruker vi f√•r √• trekke konklusjoner om populasjonen dataene kommer ifra. Tallene er koblet til forskjellige m√•l p√• usikkerhet, noe vi skal snakke mer om senere.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oppgave: Tolking av regresjonskoeffisienter
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: I eksemplet over finner vi at skj√¶ringspunktet er 3.94 enheter og stigningstallet er 0.86 enheter. Beregne det forventede kolesterolniv√•et for pasienter som spiser 1, 6 og 12 egg per uke.</p>
<p>B: Lag en ny variabel i Jamovi som beregner kolesterolniv√•et ved hjelp av antallet rapporterte egg for hver observasjon i datasettet.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Svar: Tolking av regresjonskoeffisienter
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: Vi kan bruke ligningen for regresjonsmodellen for √• beregne kolesterol for et gitt antall egg: <span class="math inline">\(= 3.94 + 0.86\times\text{egg}\)</span>. Stigningstallet gir oss forandringen i kolesterol for hver forandring i ukentlige egg.</p>
<p>B: Under <em>Variables</em> legger vi til en variabel (<em>Add</em>/<em>Computed variable</em>) og i formelfeltet kan vi bruke ligningen direkte <code>3.94 + 0.86 * egg</code>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<p>I modulmenyen finner vi <em>Assumption checks</em>. Her finnes flere alternativer for √• sjekke antagelser om modellen. Her foresl√•r vi at man f√∏rst fokuserer p√• <em>Q-Q plot of residuals</em>. Denne figuren viser hvor godt residualene f√∏lger en normalfordeling. Hvis punktene er n√¶rme den rette linjen s√• f√∏lger vi normalfordelingen og vi kan sies ha st√∏tte for antagelsen om at residualene er normalfordelte. <em>Residual plots</em> gir oss en indikasjon p√• hvor spredning av feilleddet er fordelt over datamaterialet og prediksjoner fra modellen . I figuren som viser <em>Fitted vs.&nbsp;Residuals</em> √∏nsker vi √• se at vi har like mye feil over alle predikerte tall. Muligens ser vi en tendens til mer spredning i kolesterol ved st√∏rre predikerte verdier.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oppgave: Hvordan lage en residualplot?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Du beregnet tidligere en ny variabel med predikerte tall for hvert observasjon. Denne kan vi bruke for √• beregne en ny variabel som vi kan kalle for <em>feilledd</em>. Feilleddet bergenes som differensen mellom predikerte og observerte verdier.</p>
<p>Bruk variablene i en scatter-plot (<em>Analyses/Exploration/Scatterplot</em>) og sammenlign resultatet med <em>Residual plots</em> under <em>Assumptions Checks</em>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Svar: Hvordan lage en residualplot?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Vi bruker ligningen for regresjonsmodellen for √• beregne kolesterol for et gitt antall egg: <span class="math inline">\(= 3.94 + 0.86\times\text{egg}\)</span>, denne informasjonen kan g√• inn i en variabelen som vi navngir ‚Äúpred‚Äù. Vi lager s√• en ytterligere variabel (‚Äúfeilledd‚Äù) som <code>kolesterol-pred</code>. Du b√∏r n√• ha den samme visuelle informasjonen din scatter-plot og i den f√∏rste av figurene <em>Residual plots</em>.</p>
<p>Et alternativ i <em>Regression</em> modulen er √• bruke <em>Save</em> fanen for √• spare <em>Predicted values</em> og <em>Residuals</em>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Begge disse to grafiske metodene (<em>Q-Q plot</em> og <em>Residual plots</em>) b√∏r brukes ved regresjonsanalyse da de sier noe om hvor godt modellen representerer dataene. Med sm√• datasett kreves det store brudd mot antagelser for at vi skal finne dem. Den figur du skapte selv i oppgaven over et godt utgangspunkt for √• bedre forst√• ogs√• mer komplekse modeller med flere uavhengige variabler.</p>
<p>Under modulmenyen <em>Estimated Marginal Means</em> finner vi en mulighet for √• lage en grafisk representasjon av modellen n√•r vi legger inn prediktoren under <em>Marginal Means</em>. Velger vi ogs√• <em>Marginal means table</em> f√•r vi det estimerte kolesterolniv√•et ved gjennomsnittet (<span class="math inline">\(\mu\)</span>) i variabelen egg pluss og minus et standardavvik.</p>
<section id="regresjon-og-korrelasjon" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="regresjon-og-korrelasjon"><span class="header-section-number">4.1.1</span> Regresjon og korrelasjon</h3>
<p>Som vi allerede notert gir regresjonsmodellen oss en m√•te √• beskrive forholdet mellom en avhengig variabel og en (eller flere) uavhengige variabler. En forenkling av sammenhengen mellom to variabler er en korrelasjonsanalyse. I motsetning til regresjonsmodellen s√• gj√∏r ikke korrelasjonen forskjell mellom avhengig og uavhengig variabel.</p>
<p>En regresjonsanalyse kan gj√∏res i Jamovi i modulen <em>Regression</em> hvor vi velger <em>Correlation matrix</em>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oppgave: Regresjon og korrelasjon
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: Bruk <em>Correlation Matrix</em> for √• beregne <em>Pearson Correlation Coefficient</em> p√• dataene i <a href="data/egg_kolesterol_1_2_3.csv"><code>egg_kolesterol_1_2_3.csv</code></a>. Lag ogs√• en regresjonsmodell av det samme forholdet. Hva er er korrelasjonskoeffisienten i <em>Correlation Matrix</em> resultatene respektive under <em>Model Fit Measures</em> i resultatene fra regresjonsmodellen?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Svar: Regresjon og korrelasjon
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: Disse tallene resulterer fra den samme analysen, de gir oss korrelasjonskoeffisienten. Vi kan lese korrelasjonskoeffisienten som spredningen kring regresjonsmodellens rette linje. Vi kan ogs√• lese den som stigningen i y n√•r vi √∏ker x med 1 enhet n√•r begge variabler har blitt sentrerte (trekker fra gjennomsnittet fra hvert tall) og delt med standardavviket. Du kan unders√∏ke dette ved √• skape to nye variabler ved hjelp av funksjonen <em>SCALE</em>. Regresjonen <code>SCALE(kolesterol) = SCALE(egg)</code> gir oss korrelasjonskoeffisienten som et stigningstall.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="fig-korranalyse" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="img/02-jamovi/korrelasjonsmatrise.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figur&nbsp;4.1. Eksempel p√• en scatter-plot fra modulen <em>Correlation matrix</em> i jamovi.</figcaption>
</figure>
</div>
<p>Under <em>Correlation Matrix</em> har vi ogs√• mulighet √• lage en graf over sammenhengen mellom variablene. Denne grafen kalles vanligvis for <em>scatter-plot</em>. I denne versjonen er finner vi en <em>scatter-plot</em> i den nedre venstre kvadraten i en figur som ‚Äúkrysstabulerer‚Äù variablene. P√• diagonalen finner vi fordelingen av hvert variabel og over diagonalen finner vi korrelasjonskoeffisienten (<a href="#fig-korranalyse">Figur&nbsp;<span>4.1</span></a>).</p>
<p>En korrelasjonsanalyse kan lett p√•virkes av datapunkter som avviker fra en normalfordelt variabel. I figuren under ser vi et eksempel p√• hvor et ekstremt datapunkt driver en korrelasjon (<a href="#fig-corr-extreme">Figur&nbsp;<span>4.2</span></a>). Du finner datasettet her (<a href="data/korr_ekstrem.csv"><code>korr_ekstrem.csv</code></a>). I en slik situasjon kan vi med hjelp av en enkel figur (<em>scatter-plot</em>) se at en observasjon skiller seg fra de andre og sannsynligvis p√•virker utfallet av en analyse av samvariasjon. Her finnes noen grep vi kan ta, hvis vi √∏nsker √• rapportere korrelasjonen mellom variablene n√•r de uttrykkes p√• den naturlige skalaen kan vi lage en versjon av analysen som inkluderer punktet og en som ikke gj√∏r det og rapportere begge. Konklusjonen vi f√•r er at en observasjon gir oss samvariasjonen og vi har dermed ikke sterke beviser for at de faktisk er en samvarisjon mellom variablene.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-corr-extreme" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="02-jamovi_files/figure-html/fig-corr-extreme-1.png" class="img-fluid figure-img" width="384"></p>
<figcaption class="figure-caption">Figur&nbsp;4.2. Eksempel p√• hvor en ekstrem observasjon kan p√•virke sammenhengen mellom to variabler</figcaption>
</figure>
</div>
</div>
</div>
<p>En annen strategi er √• uttrykke variablene som rangerte. De laveste tallet i hver variabel f√•r verdien 1, neste tall f√•r verdien 2, osv. Hvis vi lager en korrelasjon p√• disse transformerte variablene tar vi vekk effekten av at noen er ekstreme og derfor p√•virker analysene. Denne strategien er et eksempel p√• en ikke-parametrisk analyse da vi ikke har noen antagelser om hvordan variablene fordeles. En ikke-parametrisk korrelasjonskoeffisient kalles ofte for Spearman‚Äôs korrelasjonskoeffisient. Denne bruker vi n√•r ser at antagelse om normalfordelt data og line√¶rt forhold mellom variablene holder. I oppgaven under unders√∏ker vi hvordan denne koeffisienten beregnes.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oppgave: Regresjon og rank
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: Bruk <em>Correlation Matrix</em> for og datasettet (<a href="data/korr_ekstrem.csv"><code>korr_ekstrem.csv</code></a>) for √• beregn korrelasjonskoeffisienten (Pearsons) for variablene <code>x</code> og <code>y1</code>. Lag s√• to ny variabler ved hjelp av funksjunen <code>RANK</code> (<code>=RANK(x)</code> og <code>=RANK(Y)</code>), unders√∏k variablene for √• forst√• hva transformasjonen gj√∏r med de. Beregn s√• korrelasjonen mellom <code>=RANK(x)</code> og <code>=RANK(Y)</code> ved hjelp av Pearsons korrlasjonskoeffisient og korrlasjonen mellom <code>x</code> og <code>y1</code> ved hjelp av Spearmans korrelasjonskoeffisient</p>
<p>B: I datasettet finner vi ytterligere en variabel. Hva er forskjellen mellom Pearson og Spearmans korrelasjonskoeffisient n√•r du bruker variablene <code>x</code> og <code>y2</code>. Lag en scatter-plot av forholdet mellom disse variablene og forklar hvorfor du f√•r de resultat du f√•r.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Svar: Regresjon og rank
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: En korrelasjon beskrevet med Pearsons koeffisient gir oss 0.46 p√• dataene som ikke er transformert. N√•r vi bruker funksjonen rank f√•r vi 0.03, dette er det samme tallet vi f√•r n√•r vi bruker Spearmans korrelasjonskoeffisient p√• ikke-transformert data. Spearmans korrelasjon gir oss allts√• koeffisienten for korrelasjonen p√• rangerte data.</p>
<p>B: Her f√•r vi 0.97, respektive 0.95 ved bruk av Pearsons og Spearmans korrelasjonskoeffisient. Variablene f√∏lger et line√¶rt forhold gjennom hele datamengden og det avvikende datapunktet p√•virker derfor ikke forholdet. Den rangerte variabelen skiller seg ikke heller fra variabelen uttrykt p√• orginalskala.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="multippel-regresjon-med-jamovi" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="multippel-regresjon-med-jamovi"><span class="header-section-number">4.1.2</span> Multippel regresjon med Jamovi</h3>
<p>I datasettet <a href="data/fotball_1_2_3.csv"><code>fotball_1_2_3.csv</code></a> kan vi stille sp√∏rsm√•l til hvordan √•rsinntekt p√•virkes av <code>spillerbors</code> karakter gitt at ser denne sammenhengen er betinget <code>opprinnelse</code> og <code>posisjon</code>. Med betinget for mener vi at vi kontrollerer for disse effektene n√•r vi unders√∏ker sammenhengen mellom variablene som interesserer oss.</p>
<p>Modellen kan representeres som:</p>
<p><span class="math display">\[\text{√•rsinntekt} = \beta_0 + \beta_1\times\text{spillerb√∏rs} + \beta_2\times\text{opprinnelse} +\beta_3\times\text{posisjon}\]</span> Variabelen <code>opprinnelse</code> har to niv√•er, Norsk og Utenlandsk. I modellen vil denne variabelen bli lagt til som en dummy-variabel hvor Norsk er referanseniv√•et. Den estimerte koeffisienten <span class="math inline">\(\beta_2\)</span> vil ‚Äúaktiveres‚Äù n√•r dummy-variabelen settes til 1, det vil si, n√•r vi observerer en utenlandsk spiller. Koeffisienten gir oss alts√• gjennomsnittlig forskjell i √•rsinntekt mellom Norsk og Utenlandsk opprinnelse.</p>
<p>Variablene posisjon har fire niv√•er, angrep (referanseniv√•), forsvar, keeper og midtbane. I regresjonsmodellen vil disse bli representert med tre dummyvariabler. Vi vil ikke se disse annet en som sammenligninger med referanseniv√•et (angrep). I tabellen under ser du hvor dummyvariablene konstrueres for observasjoner i de forskjellige posisjonene</p>
<table class="table">
<thead>
<tr class="header">
<th>Posisjon</th>
<th>Dummy forsvar</th>
<th>Dummy keeper</th>
<th>Dummy midtbane</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Angrep</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Forsvar</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Keeper</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Midtbane</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>N√•r modellen beregner gjennomsnitt for angrep settes alle dummyvariablene til 0. N√•r modellen representerer en gjennomsnittlig forsvarsspiller settes dummyvariablene forsvar til 1 og koeffisienten for forsvar ‚Äúaktiveres‚Äù. Koeffisientene for de forskjellige posisjonene sammenlignes med referanseniv√•et angrep.</p>
<p>F√∏r vi lager modellen i Jamovi kontrollerer vi datatyper i datafanen, <code>spillerb√∏rs</code> kan endres til en kontinuerlig variabel, <code>opprinnelse</code> er en nominal variabel, men Norsk er referanseniv√•, indikert ved at vi finner denne i toppen av <em>levels</em>. Likes√• er angrep referanseniv√•et i den nominale variabelen <code>posisjon</code>. <code>√•rsinntekt</code> er en kontinuerlig variabel, vi beholder den slik for n√•.</p>
<p>I bakgrunnen har vi alts√• f√∏lgende modell:</p>
<p><span class="math display">\[\text{√•rsinntekt} = \beta_0 + \beta_1 x_\text{spillerb√∏rs} + \beta_2 x_\text{Utenlandsk} +\beta_3 x_\text{forsvar} + \beta_4 x_\text{keeper} +\beta_5 x_\text{midtbane}\]</span></p>
<p>Vi lager modellen ved √• sette <code>√•rsinntekt</code> som avhengig variabel (<em>Dependent variable</em>), <code>spillerb√∏rs</code> i <em>Covariates</em>, <code>posisjon</code> og <code>opprinnelse</code> i <em>Factors</em>. F√∏r vi ser p√• estimatene ser vi p√• antagelser under <em>Assumption checks</em>. Den resulterende figuren <em>Q-Q Plot</em> ser ikke lovende ut, den indikerer at residualene ikke f√∏lger en normalfordeling, noe vi antar at de gj√∏r. <em>Residuals vs.&nbsp;Fitted</em> indikerer at spredningen i feilleddet er st√∏rre ved st√∏rre predikerte tall. Modellen har mer feil n√•r de predikerte inntektene er st√∏rre.</p>
<p>Det finnes noen grep man kan ta for √• lage en modell som til st√∏rre grad f√∏lger de antagelser vi setter opp. Et vanlig grep er √• log-transformere den avhengige variabelen. Dette kan gi oss data som passer bedre i en ordin√¶r line√¶r regresjonsmodell. Log-transformering inneb√¶rer at vi tar logaritmen av den originale variabelen, dette betyr at istedenfor √• se p√• dataene p√• line√¶r skala ser p√• dem p√• en multiplikativ skala. Resultatene fra modellen vil da fortelle oss om en relativ forandring i den avhengige variabelen istedenfor absolutt forandring. Hvorfor?</p>
<p>Vi kan starte med √• se p√• noen regler for logaritmer. Multiplikasjon p√• naturlig skala gir addisjon p√• log-skala:</p>
<p><span class="math display">\[log(xy)= log(x) + log(y)\]</span> Subtraksjon p√• log-skala gir oss ratio p√• naturlig skala</p>
<p><span class="math display">\[log(x/y) = log(x) - log(y)\]</span> Et tall som vi finner p√• log-skala kan transformeres tilbake til naturlig skala ved √• bruke eksponentialfunksjonen <span class="math inline">\(e\)</span> (vanligvis bruker vi naturlige logaritmer).</p>
<p><span class="math display">\[e^{log(y)} = y\]</span> I en enkel regresjonsmodell finner vi fra et stigningstall forandring i <span class="math inline">\(y\)</span> basert p√• en enhets forandring i <span class="math inline">\(x\)</span>. P√• naturlig skala er forandring absolutt og en differens <span class="math inline">\(y_{x=1} - y_{x=0}\)</span> (differensen mellom <span class="math inline">\(y\)</span> n√•r <span class="math inline">\(x\)</span> er lik 0 og <span class="math inline">\(y\)</span> n√•r <span class="math inline">\(x\)</span> er 1). N√•r vi har den avhengige variabelen p√• log-skala gir modellen oss fortsatt differensen, men vid transformering til naturlig skala har vi et ratio</p>
<p><span class="math display">\[log(y_{x=1}) - log(y_{x=0}) = log(\frac{y_{x=1}}{y_{x=0}})\]</span> N√•r et stigningstall i en modell med en log-transformerte avhengig variabel er for eksempel 0.2 enheter gir dette at vi ser en √∏kning med 1.22 ganger for hvert √∏kning i den uavhengige variabelen:</p>
<p><span class="math display">\[e^{0.2} = 1.22\]</span> Vi kan beregne denne som en prosentdel √∏kning ved <span class="math inline">\(100 \times (e^{0.2} - 1) = 22\%\)</span>. Vi kan lese dette resultatet som at hvor enn vi starter i v√•r avhengige variabel s√• estimerer modellen 22% √∏kning i den avhengige variabelen for hvert enhets √∏kning i uavhengig variabel. Dette er en relativ √∏kning som i absolutte tall er forskjellig hvis vi starter med 10 (<span class="math inline">\(10\times 0.22=2.2\)</span>) eller 1000 (<span class="math inline">\(1000 \times 0.22 = 220\)</span>).</p>
<p>For √• transformere en variabel i Jamovi legger vi til en transformering. G√• til datafanen, marker √•rsinntekt og trykk p√• <em>transform</em>. Under <em>using transform</em> skaper vi en ny transformering (<em>Create new transform</em>), og legger inn <code>=LN(\$source)</code> i formelfeltet. I formelfeltet st√•r $source for variabelen som skal brukes i transformeringen, <code>LN</code> er funksjonen for den naturlige logaritmen. Vi kan navngi den nye transformering til <em>‚ÄúLOG‚Äù</em>. En ny variabel skapes med en bestemt <em>Source variable</em> og v√•r definerte transform (<em>using transform</em>).</p>
<p>Vi bytter den tidligere variabelen med v√•r nye log-transformerte variabel og ser igjen p√• <em>Assumption checks</em>. Dette ser bedre ut, residualene er n√¶rmere normalfordelt (<em>Q-Q Plot</em>) og spredningen i residual-figuren spreder likt over hele datamaterialet. Vi kan n√• tolke resultatene.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oppgave: Tolkning av en multippel regresjonsanalyse.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: Med hvor mye stiger √•rsinntekt for hvert enhet √∏kning i spillerb√∏rs?</p>
<p>B: Beregn √•rsinntekt for en angrepsspiller med norsk opprinnelse og verdien 3 p√• spillerb√∏rs.</p>
<p>C: Beregn √•rsinntekt for en forsvarsspiller med utenlandsk opprinnelse og verdien 4.78 p√• spillerb√∏rs.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Svar: Tolkning av en multippel regresjonsanalyse
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>A</strong>: For hvert enhet √∏kning i spillerb√∏rs stiger √•rsinntekt med 0.33 enheter p√• log-skala. Dette tilsvarer 39% √∏kning. Vi kan bruke Jamovi som kalkulator √• legge inn en ny transform: <code>=100 * (EXP(\$SOURCE) - 1)</code>. Ved √• skape en ny variabel kan vi legge inn resultatet vi er interessert i √• transformere og finner √∏kningen i prosent.</p>
<p>Alternativt finnes funksjonen for eksponentialfunksjonen i excel. Her bruker vi <code>=EKSP(0,33)</code> for √• beregne <span class="math inline">\(e\)</span> opph√∏yd i 0.33 som gir stigningstallet fra modellen p√• naturlig skala.</p>
<p><strong>B</strong>: Vi bruker ligningen for regresjonsmodellen for √• beregne √•rsinntekt for en angreps-spiller med norsk opprinnelse og verdien 3 p√• spillerb√∏rs. Modellen sier:</p>
<p><span class="math display">\[\operatorname{log}(\text{√•rsinntekt}) = \beta_0 + \beta_{\text{spillerb√∏rs}}\times3\]</span> Da vi er interesserte i referanseniv√•et for <code>opprinnelse</code> og <code>posisjon</code> faller begge ut fra ligningen. Dette gir</p>
<p><code>11.78 + 0.33 * 3 = 12.77</code></p>
<p>Tallet er p√• log-skalaen, noe som gir oss <code>EXP(12.77) = 351512</code> p√• den naturlige skalaen.</p>
<p><strong>C</strong>: Vi bruker ligningen for regresjonsmodellen for √• beregne √•rsinntekt en forsvarsspiller med utenlandsk opprinnelse og verdien 4.78 p√• spillerb√∏rs. Modellen sier:</p>
<p><span class="math display">\[\operatorname{log}(\text{√•rsinntekt}) = \beta_0 + \beta_{\text{spillerb√∏rs}}\times4.78 + \beta_{\text{forsvar}}\times1 + \beta_{\text{utenlandsk}}\times1\]</span></p>
<p>Her kan vi sette sammen verdiene fra modellen</p>
<p><code>11.78 + 0.33 * 4.78 + 0.04 + 0.3 = 13.7</code></p>
<p>Noe som gir 888597 NOK i estimert √•rsl√∏nn. Merk at den estimerte √•rsinntekten ogs√• kan beregnes i fanen <em>Estimated Marginal Means</em> ved √• sette inn alle uavhengige variabler under <em>Marginal Means</em>. Dette vil gi en tabell over alle kombinasjoner av variablene sammen med et gjennomsnitt (Marginal Mean). Det √• beregne <em>Marginal Means</em> i Jamovi gir oss ogs√• en figur som illustrerer effektene. Utenlandske spillere har noe h√∏yere √•rsinntekt sammenlignet med norske spillere, forsvar og angrep gir ogs√• h√∏yere l√∏nn samtidig som en √∏kt verdi p√• spillerb√∏rs gir h√∏yere l√∏nn.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="gruppesammenligninger-og-regresjonsanalyse" class="level2 page-columns page-full" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="gruppesammenligninger-og-regresjonsanalyse"><span class="header-section-number">4.2</span> Gruppesammenligninger og regresjonsanalyse</h2>
<div class="page-columns page-full"><p>En familie med statistiske teknikker som vi ikke snakket om enda er <em>t</em>-tester. Dette er litt rart med tanke p√• at disse teknikkene er blant de mest brukte og rapporterte statistiske ‚Äútestene‚Äù innad flere vitenskapelige felt. Vi velger denne m√•ten √• presentere teknikker for samvariasjon da vi kan gjenskape resultatene fra for eksempel en <em>t</em>-test i en regresjonsanalyse<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;I stort sett alle de mest vanlige statistiske teknikkene kan uttrykkes som variasjoner av en regresjonsmodell. Kjenner vi regresjonsmodellen og kan bruke den st√•r vi friere til √• formulere statistiske analyser etter behov. Se <a href="https://lindeloev.github.io/tests-as-linear/">lindeloev.github.io/tests-as-linear/</a> for en oversikt.</p></li></div></div>
<p><em>t</em>-testen finnes i tre forskjellige varianter: Den uavhengige t-testen, den avhengige t-testen og ‚Äúone-sample‚Äù t-testen. Den uavhengige t-testen <em>m√•ler samvariasjon</em> mellom en kategorisk variabel (uavhengig variabel) og en kontinuerlig variabel (avhengig variabel) n√•r dataene i de to kategoriene <em>uavhengige</em> av hverandre. En avhengig t-test <em>m√•ler samvariasjon</em> mellom en kategorisk variabel (uavhengig variabel) og en kontinuerlig variabel (avhengig variabel) n√•r dataene i de to kategoriene <em>avhengige</em> av hverandre. Her er det alts√• to konsepter som beskrives som avhengig/uavhengig noe som kan lage forvirring. N√•r data i de to kategoriene er avhengige (dependent) sier det noe om at det finnes ‚Äúslektskap‚Äù mellom datapunktene. For eksempel kan vi m√•le den samme variabelen i en gruppe individer etter to forskjellige intervensjoner. I en uavhengig analyse har vi isteden antagelsen at dataene ikke kommer fra den samme ‚Äústatistiske enheten‚Äù (som f.eks. fors√∏kspersoner).</p>
<p>For √• illustrerer slektskapen mellom t-testen og regresjonsmodellen starter vi med datasettet <a href="data/fotball_1_2_3.csv"><code>fotball_1_2_3.csv</code></a>. Her finner vi variablene <code>√•rsinntekt</code> og <code>opprinnelse</code>. <code>√•rsinntekt</code> er en kontinuerlig variabel og <code>opprinnelse</code> er en kategorisk variabel med to niv√•er. Disse dataene passer modellen</p>
<p><span class="math display">\[\text{√•rsinntekt} = \beta_0 + \beta_1 x_{\text{opprinnelse = utenlandsk}}\]</span> Vi starter med √• lage analysen som en regresjonsanalyse i Jamovi ved √• sette <code>√•rsinntekt</code> som avhengig variabel og <code>opprinnelse</code> som uavhengig variabel under <em>Factors</em>. Estimatet for forskjellen mellom gruppene er 112 447 NOK, denne forskjellen henger sammen med en standardfeil (<em>SE</em>) p√• 99 942 NOK, en t-verdi p√• 1.13 og p-verdi p√• 0.262.</p>
<p>Under modulen <em>T-Tests</em> kan vi velge <em>Independent Samples T-Test</em> og sette in <code>√•rsinntekt</code> som avhengig variabel og √≤pprinnelse som <em>Grouping Variable</em>. Du vill finne de samme resultatene i resultatfanen hvor <em>Statistic</em> tilsvarer t-verdien for <span class="math inline">\(\beta_1\)</span> koeffisienten i v√•r regresjonsmodell over. Legg merke til at du kan velge at resultatene skal inneholde beskrivende statistikk for gjennomsnittlig forskjell og <em>Assumption Checks</em> noe som gir mye av den samme informasjonen som du kan f√• fra en regresjonsanalyse.</p>
<p>Vi vet allerede mye analysen over, for eksempel at √•rsinntekt ogs√• varierer sammen med spillerposisjon. <em>t</em>-testen er ikke mulig √• utvide for √• inkludere flere variabler, noe som kan gi svar p√• hvordan effekten av opprinnelse ser ut n√•r vi tar hensyn til at spillerposisjon kan v√¶re skjevt fordelt mellom norske og utenlandske spillere.</p>
<section id="en-avhengig-t-test" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="en-avhengig-t-test"><span class="header-section-number">4.2.1</span> En avhengig <em>t</em>-test</h3>
<p>Som nevnt over er antagelsen om dataene i en avhengig <em>t</em>-test at de er avhengige eller korrelerte mellom for eksempel repeterte m√•linger. Slike data kan vi f√• fra et fors√∏k hvor vi m√•ler VO<sub>2maks</sub> p√• deltakere for og etter en intervensjon. Simulerte data fra en slik intervensjon finnes i datasettet <a href="data/vo2maks.csv"><code>vo2maks.csv</code></a>.</p>
<p>I en enkel regresjonsmodell kanskje vi √∏nsker √• estimere</p>
<p><span class="math display">\[\text{VO}_{2\text{maks}} = \beta_0 + \beta1 x_{test = 2}\]</span> For √• lage en rettferdig bilde av denne modellformuleringen kreves en mer avansert statistisk modell av typen <em>Mixed Linear Model</em>, noe som vi ikke g√•r videre inn p√• her. Isteden har vi flere andre alternativer og vi starter med √• gjennomf√∏re den avhengige <em>t</em>-testen.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-vo2maks" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="02-jamovi_files/figure-html/fig-vo2maks-1.png" class="img-fluid figure-img" width="384"></p>
<figcaption class="figure-caption">Figur&nbsp;4.3. VO<sub>2maks</sub> i en gruppe fors√∏kspersoner som gjennomf√∏rer en treningsintervensjon.</figcaption>
</figure>
</div>
</div>
</div>
<p>Last ned dataene (<a href="data/vo2maks.csv"><code>vo2maks.csv</code></a>) og legg merke til at testdataene er strukturert som to variabler <code>y1</code> og <code>y2</code>. Hvert rad i datasettet tilsvarer to observasjoner fra hvert individ. For √• gjennomf√∏re <em>t</em>-testen velger vi <em>Paired Samples T-test</em> under modulen <em>T-Tests</em>. Variablene <code>y1</code> og <code>y2</code> setter vi s√• inn under <em>Paired variables</em>. Akkurat som med den uavhengige <em>t</em>-testen kan vi for eksempel velge √• se p√• gjennomsnittlig differens (<em>Mean difference</em>) og <em>Assumption checks</em>. Vi noterer at forskjellen mellom <code>y1</code>og <code>y2</code> tilsvarer en <em>t</em>-verdi p√• 3.75, gjennomsnittlig forskjell er 1.61 enheter og standardfeilen for denne er 0.43.</p>
<p>I en enkel regresjonsmodell kan vi gjennomf√∏re en analyse av differensen mellom <code>y1</code> og <code>y2</code> ved √• f√∏rst beregne differensen for hvert individ. Vi lager en ny variabel (<em>Data</em>/<em>Add</em>/<em>Computed variable</em>) hvor vi beregner <code>=y2 - y1</code>. La oss navngi denne variabelen til <code>diff</code>. Vi har n√• muligheten √• lage en modell som beskriver</p>
<p><span class="math display">\[\text{VO}_{2\text{maks y2-y1}} = \beta_0\]</span> Alts√•, en koeffisient som beskriver gjennomsnittet i differensen mellom tidspunktene. For √• lage denne modellen med regresjonsmodulen kreves en ny variabel med bare en verdi i. Vi lager en variabel og fyller den med 1 p√• hver rad (<em>Data</em>/<em>Add</em>/<em>Data variable</em>), gi den nye variabelen navnet <code>x</code>. N√• kan vi sette opp en modell som gir oss en koeffisient for skj√¶ringspunktet ved √• sette <code>diff</code> somavhengig variabel og <code>x</code> som uavhengig variabel. Da <code>x</code> bare inneholder 1 s√• vil modellen ikke gi estimater for denne variabelen, men vi vil f√• estimater for <code>Intercept</code> (skj√¶ringspunktet). Vi kan n√• se at vi f√•r de samme resultatene her som for <em>Paired Samples T-Test</em>.</p>
<p>En annen m√•te √• lage den samme modellen er ved √• bruke en tilleggs-modul som heter <em>Linear Models</em> n√•r den er installert. Her kreves at vi installerer denne nye modulen. Under <em>Modules</em> velger vi <em>jamovi library</em>, finner frem <em>gamlj - General Analyses for Linear Models in jamovi</em> og velger <em>INSTALL</em>. I modulen <em>Linear Models</em> velger vi s√• <em>General Linear Model</em> og legger til variabelen <code>diff</code> som avhengig variabel. Vi f√•r igjen de samme estimatene som ved bruk av <em>t</em>-testen, men denne gangen uten √• ‚Äúlure‚Äù programmet til √• bare lage en enkel modell for skj√¶ringspunktet.</p>
</section>
<section id="one-sample-t-test" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="one-sample-t-test"><span class="header-section-number">4.2.2</span> One-sample <em>t</em>-test</h3>
<p>Den analysen som vi gjennomf√∏rt her over er den samme analysen som kan g√∏res med en one-sample <em>t</em>-test. Her bruker vi en variabel og ‚Äútester‚Äù mot en hypotese, som for eksempel sier at variabelen er 0. Den samme hypotesen er den alternative hypotesen vi stiller opp n√•r vi √∏nsker √• analysere differensene innad en gruppe.</p>
</section>
</section>
<section id="variansanalyse-i-jamovi" class="level2 page-columns page-full" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="variansanalyse-i-jamovi"><span class="header-section-number">4.3</span> Variansanalyse i Jamovi</h2>
<p>Vi kan reprodusere analysen som presenteres i Tabell 3.3 i <span class="citation" data-cites="thrane_2020">(<a href="references.html#ref-thrane_2020" role="doc-biblioref">Thrane 2020</a>)</span> ved hjelp av datasettet <a href="data/fotball_1_2_3.csv"><code>fotball_1_2_3.csv</code></a> ved √• velge <em>ANOVA</em>-modulen i Jamovi, videre velger vi <em>One-way ANOVA</em>. Denne analysen gjennomf√∏res over en kategorisk variabel, derav navnet ‚Äúen-veis variansanalyse‚Äù. Vi setter <em>√•rsinntekt</em> som avhengig variabel (<em>Dependent variable</em>) og <em>posisjon</em> som uavhengig variabel (<em>Grouping variable</em>). Legg merke til at sorteringen av variabelen skiller seg i din tabell fra boken. For √• f√• den samme sorteringen kan vi endre <em>Levels</em> under <em>Data</em> eller <em>Variables</em> (<em>Edit</em>).</p>
<div class="no-row-height column-margin column-container"></div><p>En variansanalyse unders√∏ker om variasjonen i en kontinuerlig variabel mellom grupper (kategorisk variabel) er st√∏rre enn variasjonen innad gruppene. Denne analysen er tett koblet til et hypotesetest som har en null-hypotese som sier at ingen gruppe skiller seg fra gjennomsnittet. Vi velger derfor √• vente med detaljene kring dette til modulen som omhandler <a href="04-induktiv-statistikk.html"><span>Chapter&nbsp;7</span></a>.</p>
<p>I analysemodulen for en en-veis variansanalyse finner vi flere mulige valg. Under <em>Variances</em> har vi mulighet √• velge om vi skal gj√∏re antagelse om lik eller ulik varians mellom grupper. Dette er en antagelse om modellen, i den enkleste formen har vi en antagelse om a variansen er lik mellom gruppene. Her er dog en slik antagelse vanskelig √• forsvare i mange fall og Welch‚Äôs one-way ANOVA √• foretrekke. Denne metode for √• beregne teststatistikken som blir brukt for √• teste hypotesen (gjennomsnitt i gruppen skiller seg i fra hverandre), er mer robust. Vi risikerer til mindre grad √• bli lurt av hypotesetesten (mer om dette i <a href="04-induktiv-statistikk.html"><span>Chapter&nbsp;7</span></a>).</p>
<p>Under Missing values velger vi hvordan vi h√•ndterer observasjoner hvor vi savner data. Under <em>Assumption Checks</em> kan vi la Jamovi gjennomf√∏re noen test for de antagelser som f√∏lger med analysen. <em>Homogeneity test</em> tester om variansen er lik mellom grupper, hvis den ikke er det, er som nevnt Welch‚Äôs test et test som tar h√∏yde for dette. Som i regresjonsanalysen kan vi se p√• en <em>Q-Q plot</em> som viser hvor n√¶rme feilleddet (residualene) ligger en normalfordeling.</p>
<p>Under <em>Additional Statistics</em> finner vi muligheten √• faktisk finne gjennomsnitt per gruppe. Her kan vi reprodusere Tabell 3.3 <span class="citation" data-cites="thrane_2020">(<a href="references.html#ref-thrane_2020" role="doc-biblioref">Thrane 2020</a>)</span>.</p>
<div class="no-row-height column-margin column-container"></div></section>
<section id="krysstabulering-i-jamovi" class="level2 page-columns page-full" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="krysstabulering-i-jamovi"><span class="header-section-number">4.4</span> Krysstabulering i Jamovi</h2>
<p>Vi kan gjenskape Tabell 3.5 i <span class="citation" data-cites="thrane_2020">(<a href="references.html#ref-thrane_2020" role="doc-biblioref">Thrane 2020</a>)</span> ved √• √•pne datasettet <a href="data/student_trening_1_2_3.csv"><code>student_trening_1_2_3.csv</code></a> i jamovi. Under modulen <em>Frequencies</em> finner vi <em>Independet samples, <span class="math inline">\(\chi^2\)</span> test of association</em>. Vi velger √• sette <code>kj√∏nn</code> i *Rows** og <code>idrettslag</code> i <em>Columns</em>. Under <em>Cells</em> kan vi velge √• sette opp observerte antall under <em>Observed counts</em> og prosentandeler per rad, kolonne eller totalt under <em>Percentages</em>. Jamovi kan ogs√• gi deg informative figurer fra analysene som baserer seg p√• krysstabulering under <em>Plots</em>.</p>
<div class="no-row-height column-margin column-container"><div id="ref-thrane_2020" class="csl-entry" role="listitem">
Thrane, Christer. 2020. <em>Statistisk Dataanalyse P√• 1-2-3</em>. Cappelen Damm.
</div></div><p>Under <em>Statistics</em> finner vi flere alternativer for hypotesetesting under <em>Testes</em> og <em>Hypothesis</em>. Mer relevant for denne modulen er <em>Comparative Measures</em>, disse forteller om samvariasjonen mellom, i dette fallet, <code>kj√∏nn</code> og medlemskap i <code>idrettslag</code>. Vi har tidligere beregnet <em>Odds ratio</em> og <em>Log odds ratio</em>, her finner vi ogs√• <em>Relative Risk</em> og <em>Difference in proportions</em>. Forskjellen mellom gruppene i prosentpoeng (<em>Difference in proportions</em>) er hva <span class="citation" data-cites="thrane_2020">Thrane (<a href="references.html#ref-thrane_2020" role="doc-biblioref">2020</a>)</span> rapporterer som m√•l p√• samvariasjon mellom variablene (s. 55). <em>Relative Risk</em> kan beregnes som forhold mellom ‚Äúrisk‚Äù for √• medlemskap i et idrettslag (<span class="math inline">\(\text{IL}\)</span>) hos kvinner og hos menn hvor risk er <span class="math inline">\(\text{IL}_{\text{ja}} / \text{IL}_{\text{ja}} + \text{IL}_{\text{nei}}\)</span>. Vi kan lese den relative risken som at kvinner har en risk for √• v√¶re med i et idrettslag som er 0.41 ganger risken for menn. Vi snakker vanligvis ikke om ‚Äúrisk‚Äù i slike sammenhenger.</p>
</section>
<section id="fra-krysstabulering-til-logistisk-regresjon" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="fra-krysstabulering-til-logistisk-regresjon"><span class="header-section-number">4.5</span> Fra krysstabulering til Logistisk regresjon</h2>
<p>En logistisk regresjonsmodell forteller oss om sammenhengen mellom en avhengig variabel og en eller flere uavhengige variabler uttrykket som en log-oddsforhold (log-odds ratio, OR). Vi kan bruke modulen <em>Regression</em> til √• tilpasse en logistisk regresjonsmodell som beskriver sammenhengen mellom <code>kj√∏nn</code> og medlemskap i <code>idrettslag</code>, her velger vi <em>2 Outcomes, Binomial</em> og setter inn variablene under <em>Dependent Variable</em> og <em>Factors</em>. Likt som under <em>Linear Regression</em> har vi mulighet √• bygge opp en modell med hjelp av flere variabler, kategoriske og kontinuerlige.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oppgave: Logistisk regresjon
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: Vi misstenker at variablene <code>timer_tren</code> og <code>trener_mest</code> ogs√• er av betydning for sannsynligheten for √• v√¶re medlem i et idrettslag (data i <a href="data/student_trening_1_2_3.csv"><code>student_trening_1_2_3.csv</code></a>). Det kan ogs√• v√¶re s√•nn at vi sammenligner to delvis forskjellige grupper n√•r vi sammenligner menn og kvinner. For √• gj√∏re sammenligningen mellom menn og kvinner mer korrekt √∏nsker vi √• kontrollere for <code>timer_tren</code> og <code>trener_mest</code>. Lag en modell som beskriver sammenhengen mellom <code>kj√∏nn</code> og <code>idrettslag</code>, og samtidig kontrollerer for variablene <code>timer_tren</code> og <code>trener_mest</code>.</p>
<p>N√•r du gj√∏r sammenligninger √∏nsker vi √• vite sannsynligheter for medlemskap i et idrettslag. Lag derfor en ny variabel ved bruk av funksjonen <code>=IF</code>. Denne funksjonen tar som argumenter en logisk test, verdien n√•r SANN og verdi n√•r IKKE SANN. N√•r vi skriver ‚Äútesten‚Äù som <code>idrettslag == "ja"</code> vill det gi oss SANN n√•r vi har en rad i datasettet hvor variabelen <code>idrettslag</code> er lik ‚Äúja‚Äù. Vi setter verdien p√• v√•r nye variabel til 1 i disse fallene og 0 n√•r s√• ikke er tilfelle. Hele uttrykke blir <code>=IF(idrettslag == "ja", 1, 0)</code>. Vi har n√• kontrollert at variabelen faktisk beskriver hva vi tror den beskriver.</p>
<p>Hvordan tolker du sammenhengen mellom kj√∏nn og medlemskap i et idrettslag?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Svar: Logistisk regresjon
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>I en modell hvor vi bare har kj√∏nn som uavhengig variabel sier resultatene at forholdet mellom menn og kvinner i oddsen for √• v√¶re medlem i et idrettslag er 3.21. Dette kan ogs√• sies bety at menn er 3.21 ganger mer sannsynligt medlemmer i et idrettslag sammenlignet med kvinner. N√•r vi tar sammenligner menn og kvinner samtidig som vi tar h√∏yde for antall treningstimer og hva man trener mest er det samme forholdet 2.98. Det vill si at effekten er noe svakere n√•r vi praksis sammenligner menn med kvinner som trener det samme og like mye.</p>
<p>I denne analysen er vi ikke direkte interesserte i de samvariasjon mellom andre variablene og medlemskap. Vi bruker de for √• ‚Äúbalansere‚Äù gruppene menn og kvinner s√•nn at vi sammenligner menn og kvinner med samme verdier p√• de andre variablene.</p>
<p>Odds-ratioen f√•r vi frem ved √• bruke eksponentialfunksjonen (<code>=EXP()</code> i Jamovi, <code>=EKSP()</code> i Excel, eller <span class="math inline">\(2.718282^\beta\)</span> p√• en kalkulator hvor <span class="math inline">\(\beta\)</span> er koeffisienten fra modellen). Odds-ratioen er alts√• forholdet mellom odds for medlemskap hos menn og odds for medlemskap hos kvinner.</p>
</div>
</div>
</div>
</div>
</div>
</div>



</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-statistisk-samvariasjon.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistisk samvariasjon i dataanalyse</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-a-intro.html" class="pagination-link">
        <span class="nav-page-text">Kausalsammenheng</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>